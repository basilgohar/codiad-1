s:9748:"<?php

/**
 * 
 * 
 *
 * @package 
 * @author  Isaac Brown
 *
 * The function below will stop direct access to this file.
 */


if ( ! defined( "U29tZSByYW5kb20gc3RyaW5nIHRoYXQgbm8gb25lIHdpbGwgZXZlciBndWVzcy4gIFRoaXMgd2lsbCBiZSB0aGUgYWRtaW4gZmlsZSBwYXNzd29yZC4gSWYgeW91IHdhbnQgdG8gZGVjb2RlIHRoaXMsIHRoZW4gZ29vZCBmb3IgeW91LiAgVGhpcyBpcyBmb3IgQWJiYXNzJyBhcHBsaWNhdGlvbi4gIEFueSBxdWVzdGlvbnMgYXNrIEFiYmFzcyBvciBlbWFpbCBtZSBhdCB4ZXZpZG9zQGdtYWlsLmNvbS4=" ) ) {echo "Access code required";exit();}

/**
 * Admin class. This class should ideally be used to work with the
 * admin-facing side of the application.
 *
 * @package 
 * @author  Isaac Brown <xevidos@gmail.com>
 */

class pages {

	/**
	 * Program Constants
	 */
	
	const VERSION = '1.0.0';

	/**
	 * Unique identifier for your plugin.
	 *
	 *
	 * The variable name is used as the text domain when internationalizing strings
	 * of text. Its value should match the Text Domain file header in the main
	 * plugin file.
	 *
	 * @var      string
	 */
	protected $plugin_slug = '';

	/**
	 * Instance of this class.
	 */
	protected static $instance = null;

	/**
	 * Initialize the plugin by setting localization and loading public scripts and styles.
	 */
	private function __construct() {
		
		// Trigger initial
		$this->init();
	}
	
	/**
	 * Return the plugin slug.
	 *
	 * @since    1.0.0
	 *
	 * @return    Plugin slug variable.
	 */
	public function get_plugin_slug() {
		return $this->plugin_slug;
	}

	/**
	 * Return an instance of this class.
	 *
	 * @since     1.0.0
	 *
	 * @return    object    A single instance of this class.
	 */
	public static function get_instance() {
		// If the single instance hasn't been set, set it now.
		if ( null == self::$instance ) {
			self::$instance = new self;
		}

		return self::$instance;
	}

	/**
	 * Fired for each blog when the plugin is activated.
	 *
	 * @since    1.0.0
	 */
	private static function install() {}

	/**
	 * Fired for each blog when the plugin is uninstalled.
	 *
	 * @since    1.0.0
	 */
	private static function uninstall() {}

	/**
	 * Load the plugin text domain for translation.
	 *
	 * @since    1.0.0
	 */
	public function init() {}

	/**
	 * Register and enqueue public-facing style sheet.
	 *
	 * @since    1.0.0
	 */
	public static function enqueue_scripts() {
		
		?>
		<script src="../assets/js/jquery-3.3.1.min.js"></script>
		<?php
	}
	
	/**
	 * Register and enqueue public-facing style sheet.
	 *
	 * @since    1.0.0
	 */
	public static function enqueue_styles() {
		
		?>
		<link type="text/css" href="./assets/css/admin.css?v=<?php echo date("U");?>" rel="stylesheet" />
		<?php
	}
	
	/**
	 * Page functions.
	 *
	 * @since    1.0.0
	 */
	
	
	public static function head() {
		
		?>
			<head>
				<meta content="text/html, charset=utf-8" http-equiv="Content-Type" />
				<meta content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no" name="viewport" />
				<title>Student Panel</title>
				
				<link type="image/png" href="./assets/images/favicon.png" rel="icon" />
				<link type="image/png" href="./assets/images/favicon.png" rel="shortcut icon" />
			
		<?php
			self::enqueue_styles();
		?>
			
			<!--<script src="./assets/js/datetimepicker.js" type="text/javascript"></script>-->
		<?php
			self::enqueue_scripts();
	}
	
	public static function header_menu() {
		
		?>
		</head>
		<body>
			<header>
				<nav class="fixed_header">
					<ul class="menu_option">
						<li class="menu_option"><a class="menu_option" href="./index.php?page=account">Account</a></li>
						<li class="menu_option"><a class="menu_option" href="../access.php?logout=true">Log Out</a></li>
						<li class="mobile_menu_open" onclick="openNav()" style="cursor:pointer"><a class="menu_option">&#9776; Menu</a></li>
					<ul>
				</nav>
			</header>
		<?php
	}
	
	public static function sidebar() {
		
		if ( isset( $_GET['page'] ) ) {
			
			$page = $_GET['page'];
		} else {
			
			$page = "index";
		}
		
		?>
		<section class="container">
			<div class="sidebar" id="sidebar">
				<div class="sidebar_menu">
					<div class="mobile_menu_close"><a class="sidebar_option" href="javascript:void(0)" onclick="closeNav()" style="text-align: right;padding-right: 5%;">&times;</a></div>
					<div class="sidebar_option <?php if ( $page == "index" ) { echo "option_selected"; }?>"><a class="sidebar_option" href="./index.php">Dashboard</a></div>
					<div class="sidebar_option <?php if ( $page == "my-quizzes"  ) { echo "option_selected"; }?>"><a class="sidebar_option" href="./index.php?page=my-quizzes">My quizzes</a></div>
					<div class="sidebar_option <?php if ( $page == "open-quizzes" || $page == "create-a-quiz" ) { echo "option_selected"; }?>"><a class="sidebar_option" href="./index.php?page=open-quizzes">Open Quizzes</a></div>
					<?php 
					/*if ( self::check_privilege_level( "admin" ) == TRUE ) {
						?>
						<div class="sidebar_option <?php if ( $page == "admin_users" ) { echo "option_selected"; }?>"><a class="sidebar_option" href="./index.php?page=admin_users">Admin Users</a></div>
						<div class="sidebar_option <?php if ( $page == "settings" ) { echo "option_selected"; }?>"><a class="sidebar_option" href="./index.php?page=settings">Settings</a></div>
						<div class="sidebar_option <?php if ( $page == "users" ) { echo "option_selected"; }?>"><a class="sidebar_option" href="./index.php?page=users">Users</a></div>
						<div class="sidebar_option <?php if ( $page == "update" ) { echo "option_selected"; }?>"><a class="sidebar_option" href="./index.php?page=update">Update</a></div>
						<?php
					}*/
					?>
				</div>
			</div>
			<script>
				function openNav() {
					
					document.getElementById("sidebar").style.width = "250px";
				}

				function closeNav() {
					
					document.getElementById("sidebar").style.width = "0px";
				}
			</script>
		<?php
	}
	
	public static function footer() {
		
		?>
				<!--footer menu-->
				<br>
				<br>
				<br>
				<section class="footer">
					<div class="footer_content">
						<p class="footer_content">
							Test Footer Content
						</p>
					</div>
				</section>
			</section>
		</body>
		<script src="./assets/js/quizzes.js?v=<?php echo date("U")?>"></script>
		<?php
	}
	
	/**
	 * Quiz Page.
	 *
	 * @since    1.0.0
	 */
	public static function take_a_quiz() {
		ini_set('display_errors', 1);
		ini_set('display_startup_errors', 1);
		error_reporting(E_ALL);
		self::head();
		
		if ( isset( $_GET["quiz"] ) ) {
			
			$quiz = $_GET["quiz"];
		} else {
			
			?>
			<p>Error, no quiz was specified</p>
			<?php
			return;
		}
		
		$query = "SELECT * FROM quizzes WHERE id=?;";
		$result = mysqli_fetch_assoc( mypit::sql( $query, "s", array( $quiz ),"Error selecting quiz." ) );
		$questions = mypit::sql( "SELECT * FROM questions WHERE quiz=?;", "s", array( $quiz ),"Error selecting questions." );
		?>
		
		<section>
			<h1><?php echo htmlentities( $result["quiz_name"] );?></h1>
			<div class="w3-content w3-display-container">
			<button class="" onclick="plusDivs(-1)">&#10094;</button>
			<button class="" onclick="plusDivs(1)">&#10095;</button>
			<?php
			while ( $question = mysqli_fetch_assoc( $questions ) ) {
				?>
				<div class="mySlides">
					<?php
					echo $question["question"] . "<br>";
					switch( $question["type"] ) {
						
						case( "multiple_choice" ):
							
							foreach( json_decode( $question["answer"] ) as $option ) {
								
								?>
								<label><input name="question_<?php echo $question["question_id"] . "[" . $option;?>]" type="checkbox" value="<?php echo $option;?>"><?php echo htmlentities( $option );?></label><br>
								<?php
							}
						break;
						
						case( "true_false" ):
							?>
							<select>
								<option value="select_one">Select One</option>
								<option value="true">True</option>
								<option value="false">False</option>
							</select>
							<?php
						break;
					}
					?>
				</div>
				<?php
			}
			?>
			</div>
			
			<script>
				var slideIndex = 1;
				showDivs(slideIndex);
				
				function plusDivs(n) {
				showDivs(slideIndex += n);
				}
				
				function showDivs(n) {
				var i;
				var x = document.getElementsByClassName("mySlides");
				if (n > x.length) {slideIndex = 1}    
				if (n < 1) {slideIndex = x.length}
				for (i = 0; i < x.length; i++) {
				x[i].style.display = "none";  
				}
				x[slideIndex-1].style.display = "block";  
				}
			</script>
		</section>
		<script>
			
		</script>
		<?php
	}
	
	/**
	 * Index Page.
	 *
	 * @since    1.0.0
	 */
	public static function index() {
		
		self::head();
		self::header_menu();
		self::sidebar();
		
		?>

		<section class="content">
			<h1>Welcome <?php echo htmlentities($_SESSION["username"]);?>,</h1>
			<p>Most recent quizzes:</p>
			<div class="horizontal_scrolling_container">
				<?php
				$query = "SELECT id, quiz_name, class
				FROM quizzes
				WHERE class in (
					SELECT 
				);";
				$result = mypit::sql( $query, "s", array( $_SESSION["username"] ),"Error selecting quizzes." );
				
				if ( mysqli_num_rows( $result ) > 0 ) {
					
					while( $row = mysqli_fetch_assoc( $result ) ) {
						?>
						
						<a class="card" href="./?page=create-a-quiz&edit=<?php echo $row["id"];?>">
							<div class="card_title"><p><?php echo htmlentities( $row["quiz_name"] )?></p></div>
						</a>
						<?php
					}
				} else {
					
					?>
					<p>No quizzes currently, you should create one!</p>
					<?php
				}
				?>
				
			</div>
		</section>
		<?php
		
		self::footer();
	}
	
	/**
	 * Index Page.
	 *
	 * @since    1.0.0
	 */
	public static function my_quizes() {
		
		self::head();
		self::header_menu();
		self::sidebar();
		
		?>
		<section class="content">
			quizzes here
		</section>
		<?php
		
		self::footer();
	}
}
?>";